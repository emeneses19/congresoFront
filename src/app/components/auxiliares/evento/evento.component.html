<div class="formulario-agregar-evento">
    <div class="cabezera-formulario">
        <h2 mat-dialog-title> Evento</h2>
        <mat-dialog-actions>
            <mat-icon mat-button mat-dialog-close aria-hidden="false" aria-label="close" fontIcon="close"></mat-icon>
        </mat-dialog-actions>
    </div>
    <div class="formulario-evento">
        <mat-dialog-content>
            <div *ngIf="error" class="mensaje-error">
                <span>texto error</span>
            </div>
            <form class="form" #formulario="ngForm">
                <mat-form-field appearance="outline">
                    <mat-label>Código</mat-label>
                    <input [(ngModel)]="evento.codigoEvento" name="codigoEvento" matInput required="required">
                    <span class="material-icons btn-generadrCodigo" (click)="generarIdEvento()">
                        edit
                    </span>
                    <mat-error>
                        <ng-container>Campo es
                            <strong>obligatorio</strong>
                        </ng-container>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Nombre</mat-label>
                    <input  [(ngModel)]="evento.nombre" name="nombre" matInput required minlength="4">
                    <mat-error>
                        <ng-container>Campo es
                            <strong>obligatorio</strong>
                        </ng-container>
                        <ng-container>
                            El nombre debe tener <strong>al menos 5 caracteres</strong>
                        </ng-container>
                    </mat-error>

                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Descripción</mat-label>
                    <textarea [(ngModel)]="evento.descripcion" name="descripcion" matInput></textarea>
                </mat-form-field>
                <div class="section_principal">
                    <mat-form-field class="section__secundario">
                        <mat-label>Fecha de evento</mat-label>
                        <input [(ngModel)]="evento.fecha" name="fecha" matInput [matDatepicker]="fechaEvento" required>
                        <mat-datepicker-toggle matIconSuffix [for]="fechaEvento"></mat-datepicker-toggle>
                        <mat-datepicker #fechaEvento></mat-datepicker>
                        <mat-error>
                            <ng-container>Campo es
                                <strong>obligatorio</strong>
                            </ng-container>
                        </mat-error>
                    </mat-form-field>
                    <div class=" section__secundario hora">
                        <mat-label class="custom-label">Hora del evento</mat-label>
                        <input [(ngModel)]="horaEvento" name="hora" [ngxTimepicker]="hora" class="custom-input" required>
                        <ngx-material-timepicker #hora></ngx-material-timepicker>
                        <span class="material-icons" (click)="hora.open()">
                            schedule
                        </span>
                        <mat-error *ngIf="horaEvento == ''" >
                            <ng-container>Campo es
                                <strong>obligatorio</strong>
                            </ng-container>
                        </mat-error>
                    </div>
                </div>
                <div class="section_principal">
                    <div class="section__secundario hora">
                        <mat-label class="custom-label">Tolerancia hasta
                        </mat-label>
                        <input  [(ngModel)]="horaToleranciaEvento" name="horaToleranciaEvento" [ngxTimepicker]="tolerancia" class="custom-input" required>
                        <ngx-material-timepicker #tolerancia></ngx-material-timepicker>
                        <span class="material-icons" (click)="tolerancia.open()">
                            schedule
                        </span>
                        <mat-error *ngIf="horaToleranciaEvento == ''" >
                            <ng-container>Campo es
                                <strong>obligatorio</strong>
                            </ng-container>                            
                        </mat-error>
                    </div>
                    <mat-form-field class="section__secundario" appearance="outline">
                        <mat-label>Duración</mat-label>
                        <input [(ngModel)]="evento.duracion" name="duracion" matInput type="number"  placeholder="0">
                        <span matTextSuffix>Horas</span>
                    </mat-form-field>
                </div>

                <mat-form-field appearance="outline">
                    <mat-label>Congreso</mat-label>
                    <mat-select [(ngModel)]="evento.congresoIdCongreso" name="congresoIdCongreso" required >
                        <mat-option *ngFor="let congreso of listaDeCongresos" [value]="congreso.codigoCongreso">{{congreso.nombre}}-{{congreso.codigoCongreso}}</mat-option>
                    </mat-select>
                    <mat-error >
                        <ng-container>Campo es
                            <strong>obligatorio</strong>
                        </ng-container>
                    </mat-error>
                </mat-form-field>
                <mat-dialog-actions align="end">
                    <button class="btn-guardar" type="submit" mat-button (click)="guardarEvento(formulario)">Guardar</button>
                </mat-dialog-actions>

            </form>
        </mat-dialog-content>
    </div>
    <div class="formulario-evento cargando">
        <img src="../../../../assets/img/cargando2.gif" alt="cargando">
        <span>Cargando</span>
    </div>
    <div class="section_lista">
        <app-lista-evento></app-lista-evento>
    </div>
</div>